today i learnt to run a simple pipeline ..which fetches github stars..and sends notification to a discord channel using webhooks ..

python unit testing ..

python unit testing 

1.first i defined a simple function  and saved it under the name of a python file 

`def city_function(city,country,population):
return f"{city}, {country}"`

i saved this function as city_function.py

then i imported this into another file ..and i also imported unit testing 

`from city_functions import city_function
import unittest`

`class TestClass(unittest.TestCase):
def test_city_country(self):
c_func= city_function('madras','india')
self.assertEqual(c_func,'madras, india')`

`if **name**=='**main**':
unittest.main(argv=[''], verbosity=2, exit=False)`

here i called the function that i imported ..and passed in the parameters required for it 

here i used assertEqual ..and i passed in the method ..and the output that i am expecting from it ..

this evalutes to True ..if what the function outputs ..what is expected from it ..and the test fails ..it it doesnt ..

kestra simple pipeline..

python file to make a api call to the kestra github account and parse the stargazers_count from the json response ..which is a dict of key value pairs ..

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/a2103482-b8e9-4d9c-a5e8-964356107cee/051f006b-254b-4adf-8d0d-30ff463e8ee9/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/a2103482-b8e9-4d9c-a5e8-964356107cee/cf4df737-b79a-4150-8b2c-0b1d1a6ef884/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/a2103482-b8e9-4d9c-a5e8-964356107cee/f17047c2-aa56-4d86-aa51-4d1caa86d99b/image.png)

[1.here](http://1.here) we started off with a simple task with a id hello which can run python commands..we can select this from a variety of options that we could choose from in the kestra ui for the type ..

this runs the python file thats available under the scripts folder..

this fetches the stars count and assigns it to gh_stars..

we can set the triggers block and this uses a cron job to automatically run a job at periodic intervals..

in the python file..when we use the Kestra.outputs() ..this variable can be used elsewhere in some other different tasks..this facilitates for a variable thats the output of some task to be used across the project ..

we are supplying the wehook as an input ..

this webhook url is generated by going to our discord channel ..

select setting → intergrations →new webhook and copy the webhook url  and thats the url that we could use for input ..

we use the send notification task which sends notifications to our dicord group at regular intervals ..that we have set in our cron job ..for the number of github stars in kestra account ..
